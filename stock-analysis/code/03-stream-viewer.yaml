kind: remote
metadata:
  name: stream-viewer
  tag: ''
  hash: 242095fdf5655ba4f71068f6a7804878de80926f
  project: default
spec:
  command: ''
  args: []
  image: ''
  description: ''
  min_replicas: 1
  max_replicas: 4
  env: []
  base_spec:
    apiVersion: nuclio.io/v1
    kind: Function
    metadata:
      annotations:
        nuclio.io/generated_by: function generated from /User/test/demos/stock-analysis/code/03-stream-viewer.ipynb
      labels: {}
      name: stream-viewer
    spec:
      build:
        baseImage: mlrun/mlrun:0.6.5-rc15
        commands:
        - pip install v3io
        functionSourceCode: IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHYzaW8uZGF0YXBsYW5lCmltcG9ydCBqc29uCmltcG9ydCBvcwoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIGFjY2Vzc19rZXkgPSBvcy5nZXRlbnYoJ1YzSU9fQUNDRVNTX0tFWScsIE5vbmUpCiAgICBzZXRhdHRyKGNvbnRleHQsICdjb250YWluZXInLCBvcy5nZXRlbnYoJ1YzSU9fQ09OVEFJTkVSJywgJ3VzZXJzJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdzdHJlYW1fcGF0aCcsIG9zLmdldGVudignU1RPQ0tTX1NUUkVBTScsb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykgKyAnL3N0b2Nrcy9zdG9ja3Nfc3RyZWFtJykpCiAgICAKICAgIHYzaW9fY2xpZW50ID0gdjNpby5kYXRhcGxhbmUuQ2xpZW50KGVuZHBvaW50PW9zLmdldGVudignVjNJT19BUEknLCBOb25lKSwgYWNjZXNzX2tleT1hY2Nlc3Nfa2V5KQogICAgc2V0YXR0cihjb250ZXh0LCAnZGF0YScsIFtdKQogICAgc2V0YXR0cihjb250ZXh0LCAndjNpb19jbGllbnQnLCB2M2lvX2NsaWVudCkgCiAgICBzZXRhdHRyKGNvbnRleHQsICdsaW1pdCcsIG9zLmdldGVudignTElNSVQnLCAxMCkpCiAgICAKICAgIApkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICByZXNwID0gY29udGV4dC52M2lvX2NsaWVudC5zZWVrX3NoYXJkKGNvbnRhaW5lcj1jb250ZXh0LmNvbnRhaW5lciwgcGF0aD1mJ3tjb250ZXh0LnN0cmVhbV9wYXRofS8wJywgc2Vla190eXBlPSdFQVJMSUVTVCcpCiAgICBzZXRhdHRyKGNvbnRleHQsICduZXh0X2xvY2F0aW9uJywgcmVzcC5vdXRwdXQubG9jYXRpb24pCiAgICByZXNwID0gY29udGV4dC52M2lvX2NsaWVudC5nZXRfcmVjb3Jkcyhjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsIHBhdGg9Zid7Y29udGV4dC5zdHJlYW1fcGF0aH0vMCcsIGxvY2F0aW9uPWNvbnRleHQubmV4dF9sb2NhdGlvbiwgbGltaXQ9Y29udGV4dC5saW1pdCkKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ2xvY2F0aW9uOiAlcycsIGNvbnRleHQubmV4dF9sb2NhdGlvbikKCiAgICBmb3IgcmVjIGluIHJlc3Aub3V0cHV0LnJlY29yZHM6CiAgICAgICAgcmVjX2RhdGEgPSByZWMuZGF0YS5kZWNvZGUoJ3V0Zi04JykKICAgICAgICByZWNfanNvbiA9IGpzb24ubG9hZHMocmVjX2RhdGEpCiAgICAgICAgY29udGV4dC5kYXRhLmFwcGVuZCh7J1RpbWUnOiByZWNfanNvblsndGltZSddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTeW1ib2wnOiByZWNfanNvblsnc3ltYm9sJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NlbnRpbWVudCc6IHJlY19qc29uWydzZW50aW1lbnQnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTGluayc6IHJlY19qc29uWydsaW5rJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQnOiByZWNfanNvblsnY29udGVudCddfSkKCiAgICBjb250ZXh0LmRhdGEgPSBjb250ZXh0LmRhdGFbLWNvbnRleHQubGltaXQ6XQogICAgCiAgICBjb2x1bW5zID0gW3sndGV4dCc6IGtleSwgJ3R5cGUnOiAnb2JqZWN0J30gZm9yIGtleSBpbiBbJ1RpbWUnLCAnU3ltYm9sJywgJ1NlbnRpbWVudCcsICdMaW5rJywgJ0NvbnRlbnQnXV0KICAgIGRhdGEgPSBbbGlzdChpdGVtLnZhbHVlcygpKSBmb3IgaXRlbSBpbiBjb250ZXh0LmRhdGFdCiAgICByZXNwb25zZSA9IFt7J2NvbHVtbnMnOiBjb2x1bW5zLAogICAgICAgICAgICAgICAgJ3Jvd3MnOiBkYXRhLAogICAgICAgICAgICAgICAgJ3R5cGUnOiAndGFibGUnfV0KICAgIHJldHVybiByZXNwb25zZSAgICAgICAgICAgICAgCgo=
        noBaseImagesPull: true
      env:
      - name: V3IO_ACCESS_KEY
        value: a053dc07-03d1-42da-824e-9b740ac307f4
      - name: V3IO_USERNAME
        value: dani
      - name: V3IO_API
        value: v3io-webapi.default-tenant.svc:8081
      handler: 03-stream-viewer:handler
      runtime: python:3.6
      volumes: []
  source: ''
  build:
    commands: []
    code_origin: https://github.com/daniels290813/demos.git#f1d8e6d59a84cf237c1819343019bd028c589796:stream-viewer.ipynb
  default_handler: handler
  affinity: null
verbose: false
